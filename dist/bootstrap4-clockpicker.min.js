'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

(function($){function createSvgElement(name){return document.createElementNS('http://www.w3.org/2000/svg',name)}function leadingZero(num){return (10>num?'0':'')+num}function uniqueId(prefix){var id=++idCounter+'';return prefix?prefix+id:id}function ClockPicker(element,options){function mousedown(e,space){var offset=plate.offset(),isTouch=/^touch/.test(e.type),x0=offset.left+100,y0=offset.top+100,dx=(isTouch?e.originalEvent.touches[0]:e).pageX-x0,dy=(isTouch?e.originalEvent.touches[0]:e).pageY-y0,z=_Mathsqrt(dx*dx+dy*dy),moved=!1;if(!(space&&(67>z||93<z))){e.preventDefault();var movingTimer=setTimeout(function(){$body.addClass('clockpicker-moving');},200);svgSupported&&plate.append(self.canvas),self.setHand(dx,dy,!0),$doc.off(mousemoveEvent).on(mousemoveEvent,function(e){e.preventDefault();var isTouch=/^touch/.test(e.type),x=(isTouch?e.originalEvent.touches[0]:e).pageX-x0,y=(isTouch?e.originalEvent.touches[0]:e).pageY-y0;(moved||x!=dx||y!=dy)&&(moved=!0,self.setHand(x,y,!0));}),$doc.off(mouseupEvent).on(mouseupEvent,function(e){$doc.off(mouseupEvent),e.preventDefault();var isTouch=/^touch/.test(e.type),x=(isTouch?e.originalEvent.changedTouches[0]:e).pageX-x0,y=(isTouch?e.originalEvent.changedTouches[0]:e).pageY-y0;(space||moved)&&x==dx&&y==dy&&self.setHand(x,y),'hours'===self.currentView?self.toggleView('minutes',duration/2):options.autoclose&&!options.ampmSubmit&&(self.minutesView.addClass('clockpicker-dial-out'),setTimeout(function(){self.done();},duration/2)),plate.prepend(canvas),clearTimeout(movingTimer),$body.removeClass('clockpicker-moving'),$doc.off(mousemoveEvent);});}}var popover=$(tpl),plate=popover.find('.clockpicker-plate'),hoursView=popover.find('.clockpicker-hours'),minutesView=popover.find('.clockpicker-minutes'),isInput='INPUT'===element.prop('tagName'),input=isInput?element:element.find('input'),isHTML5='time'===input.prop('type'),addon=element.find('.input-group-addon'),popoverBody=popover.find('.popover-body'),closeBlock=popoverBody.find('.clockpicker-close-block'),self=this;this.id=uniqueId('cp'),this.element=element,this.options=options,this.options.hourstep=this.parseStep(this.options.hourstep,12),this.options.minutestep=this.parseStep(this.options.minutestep,60),this.isAppended=!1,this.isShown=!1,this.currentView='hours',this.isInput=isInput,this.isHTML5=isHTML5,this.input=input,this.addon=addon,this.popover=popover,this.plate=plate,this.hoursView=hoursView,this.minutesView=minutesView,this.spanHours=popover.find('.clockpicker-span-hours'),this.spanMinutes=popover.find('.clockpicker-span-minutes'),this.buttonsAmPm=popover.find('.clockpicker-buttons-am-pm'),this.currentPlacementClass=options.placement,this.raiseCallback=function(){raiseCallback.apply(self,arguments);},options.twelvehour&&($(this.buttonsAmPm).css('display','flex'),$('<a class="btn-am">AM</a>').on('click',function(){self.amOrPm='AM',$(this).removeClass('text-white-50'),$('.btn-pm').addClass('text-white-50'),options.ampmSubmit&&setTimeout(function(){self.done();},duration/2);}).appendTo(this.buttonsAmPm),$('<a class="btn-pm text-white-50">PM</a>').on('click',function(){self.amOrPm='PM',$(this).removeClass('text-white-50'),$('.btn-am').addClass('text-white-50'),options.ampmSubmit&&setTimeout(function(){self.done();},duration/2);}).appendTo(this.buttonsAmPm)),options.autoclose||(closeBlock.append('<button type="button" class="btn btn-sm btn-outline-primary">'+options.canceltext+'</button>').on('click',function(){$(this).closest('.clockpicker-popover').hide();}),closeBlock.css('display','flex').append('<button type="button" class="btn btn-sm btn-outline-primary">'+options.donetext+'</button>').click($.proxy(this.done,this))),/^(top|bottom)/.test(options.placement)&&('top'===options.align||'bottom'===options.align)&&(options.align='left'),('left'===options.placement||'right'===options.placement)&&('left'===options.align||'right'===options.align)&&(options.align='top'),popover.addClass(options.placement),popover.addClass('clockpicker-align-'+options.align),this.spanHours.click($.proxy(this.toggleView,this,'hours')),this.spanMinutes.click($.proxy(this.toggleView,this,'minutes')),options.addonOnly||input.on('focus.clockpicker click.clockpicker',$.proxy(this.show,this)),addon.on('click.clockpicker',$.proxy(this.toggle,this));var i,tick,radian,radius,tickTpl=$('<div class="clockpicker-tick"></div>');if(options.twelvehour)for(i=0;12>i;i+=options.hourstep)tick=tickTpl.clone(),radian=i/6*_MathPI,radius=80,tick.css('font-size','120%'),tick.css({left:100+_Mathsin(radian)*radius-13,top:100-_Mathcos(radian)*radius-13}),tick.html(0===i?12:i),hoursView.append(tick),tick.on(mousedownEvent,mousedown);else for(i=0;24>i;i+=options.hourstep){var isDisabled=!1;if(options.disabledhours&&-1!=$.inArray(i,options.disabledhours))var isDisabled=!0;tick=tickTpl.clone(),radian=i/6*_MathPI;var inner=0<i&&13>i;radius=inner?54:80,tick.css({left:100+_Mathsin(radian)*radius-13,top:100-_Mathcos(radian)*radius-13}),inner&&tick.css('font-size','120%'),isDisabled&&tick.addClass('disabled'),tick.html(0===i?'00':i),hoursView.append(tick),isDisabled||tick.on(mousedownEvent,mousedown);}var incrementValue=Math.max(options.minutestep,5);for(i=0;60>i;i+=incrementValue)tick=tickTpl.clone(),radian=i/30*_MathPI,tick.css({left:100+80*_Mathsin(radian)-13,top:100-80*_Mathcos(radian)-13}),tick.css('font-size','120%'),tick.html(leadingZero(i)),minutesView.append(tick),tick.on(mousedownEvent,mousedown);if(plate.on(mousedownEvent,function(e){0===$(e.target).closest('.clockpicker-tick').length&&mousedown(e,!0);}),svgSupported){var canvas=popover.find('.clockpicker-canvas'),svg=createSvgElement('svg');svg.setAttribute('class','clockpicker-svg'),svg.setAttribute('width',200),svg.setAttribute('height',200);var g=createSvgElement('g');g.setAttribute('transform','translate(100,100)');var bearing=createSvgElement('circle');bearing.setAttribute('class','clockpicker-canvas-bearing'),bearing.setAttribute('cx',0),bearing.setAttribute('cy',0),bearing.setAttribute('r',3);var hand=createSvgElement('line');hand.setAttribute('x1',0),hand.setAttribute('y1',0);var bg=createSvgElement('circle');bg.setAttribute('class','clockpicker-canvas-bg'),bg.setAttribute('r',13);var fg=createSvgElement('circle');fg.setAttribute('class','clockpicker-canvas-fg'),fg.setAttribute('r',3.5),g.appendChild(hand),g.appendChild(bg),g.appendChild(fg),g.appendChild(bearing),svg.appendChild(g),canvas.append(svg),this.hand=hand,this.bg=bg,this.fg=fg,this.bearing=bearing,this.g=g,this.canvas=canvas;}this.raiseCallback(this.options.init,'init');}function raiseCallback(callbackFunction,triggerName){if(callbackFunction&&'function'==typeof callbackFunction&&this.element){var time=this.getTime()||null;callbackFunction.call(this.element,time);}triggerName&&this.element.trigger('clockpicker.'+triggerName||'NoName');}function resolveAdaptiveVerticalPlacement(element,popover,preferredPlacement){var popoverHeight=popover.outerHeight(),elementHeight=element.outerHeight(),elementTopOffset=element.offset().top,elementBottomOffset=element.offset().top+elementHeight,minVisibleY=elementTopOffset-element[0].getBoundingClientRect().top,maxVisibleY=minVisibleY+document.documentElement.clientHeight,isEnoughRoomAbove=elementTopOffset-popoverHeight>=minVisibleY,isEnoughRoomBelow=elementBottomOffset+popoverHeight<=maxVisibleY;if('top'===preferredPlacement){if(isEnoughRoomAbove)return 'top';if(isEnoughRoomBelow)return 'bottom'}else{if(isEnoughRoomBelow)return 'bottom';if(isEnoughRoomAbove)return 'top'}return 'viewport-top'}var $body,_Mathround=Math.round,_Mathsqrt=Math.sqrt,_Mathcos=Math.cos,_Mathsin=Math.sin,_MathPI=Math.PI,$win=$(window),$doc=$(document),svgSupported='SVGAngle'in window&&function(){var supported,el=document.createElement('div');return el.innerHTML='<svg/>',supported='http://www.w3.org/2000/svg'==(el.firstChild&&el.firstChild.namespaceURI),el.innerHTML='',supported}(),transitionSupported=function(){var style=document.createElement('div').style;return 'transition'in style||'WebkitTransition'in style||'MozTransition'in style||'msTransition'in style||'OTransition'in style}(),touchSupported='ontouchstart'in window,mousedownEvent='mousedown'+(touchSupported?' touchstart':''),mousemoveEvent='mousemove.clockpicker'+(touchSupported?' touchmove.clockpicker':''),mouseupEvent='mouseup.clockpicker'+(touchSupported?' touchend.clockpicker':''),vibrate=navigator.vibrate?'vibrate':navigator.webkitVibrate?'webkitVibrate':null,idCounter=0,duration=transitionSupported?350:1,tpl='<div class="popover clockpicker-popover"><div class="arrow"></div><div class="popover-header"><span class="clockpicker-span-hours"></span>:<span class="clockpicker-span-minutes text-white-50"></span><span class="clockpicker-buttons-am-pm"></span></div><div class="popover-body"><div class="clockpicker-plate"><div class="clockpicker-canvas"></div><div class="clockpicker-dial clockpicker-hours"></div><div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div></div><div class="clockpicker-close-block justify-content-end"></div></div></div>';ClockPicker.prototype.parseStep=function(givenStepSize,wholeSize){return 0==wholeSize%givenStepSize?givenStepSize:1},ClockPicker.DEFAULTS={default:'',fromnow:0,placement:'bottom',align:'left',donetext:'OK',canceltext:'Cancel',autoclose:!1,twelvehour:!1,vibrate:!0,hourstep:1,minutestep:1,ampmSubmit:!1,addonOnly:!1,disabledhours:null},ClockPicker.prototype.toggle=function(){this[this.isShown?'hide':'show']();},ClockPicker.prototype.updatePlacementClass=function(newClass){this.currentPlacementClass&&this.popover.removeClass(this.currentPlacementClass),newClass&&this.popover.addClass(newClass),this.currentPlacementClass=newClass;},ClockPicker.prototype.locate=function(){var element=this.element,popover=this.popover,offset=element.offset(),width=element.outerWidth(),height=element.outerHeight(),placement=this.options.placement,align=this.options.align,windowHeight=$win.height(),windowWidth=$win.width(),popoverHeight=popover.height(),popoverWidth=popover.width(),styles={};if('top-adaptive'===placement||'bottom-adaptive'===placement){var preferredPlacement=placement.substr(0,placement.indexOf('-'));placement=resolveAdaptiveVerticalPlacement(element,popover,preferredPlacement),this.updatePlacementClass('viewport-top'===placement?'':placement);}popover.show();'bottom'===placement?styles.top=offset.top+height:'right'===placement?styles.left=offset.left+width:'top'===placement?styles.top=offset.top-popover.outerHeight():'left'===placement?styles.left=offset.left-popover.outerWidth():'viewport-top'===placement?styles.top=offset.top-element[0].getBoundingClientRect().top:void 0;'left'===align?styles.left=offset.left:'right'===align?styles.left=offset.left+width-popover.outerWidth():'top'===align?styles.top=offset.top:'bottom'===align?styles.top=offset.top+height-popover.outerHeight():void 0;popoverHeight+styles.top>windowHeight&&(styles.top=offset.top-popover.outerHeight()),popoverWidth+styles.left>windowWidth&&(styles.left=windowWidth-popoverWidth),popover.css(styles);},ClockPicker.prototype.parseInputValue=function(){var value=this.input.prop('value')||this.options['default']||'';if('now'===value&&(value=new Date(+new Date+this.options.fromnow)),value instanceof Date&&(value=value.getHours()+':'+value.getMinutes()),value=value.split(':'),this.hours=+value[0]||0,this.minutes=+(value[1]+'').replace(/\D/g,'')||0,this.hours=_Mathround(this.hours/this.options.hourstep)*this.options.hourstep,this.minutes=_Mathround(this.minutes/this.options.minutestep)*this.options.minutestep,this.options.twelvehour){var period=(value[1]+'').replace(/\d+/g,'').toLowerCase();this.amOrPm=12<this.hours||'am'===period?'AM':'PM';}},ClockPicker.prototype.show=function(){if(!this.isShown){this.raiseCallback(this.options.beforeShow,'beforeShow');var self=this;this.isAppended||($body=$(document.body).append(this.popover),$win.on('resize.clockpicker'+this.id,function(){self.isShown&&self.locate();}),this.isAppended=!0),this.parseInputValue(),this.spanHours.html(leadingZero(this.hours)),this.spanMinutes.html(leadingZero(this.minutes)),this.toggleView('hours'),this.locate(),this.isShown=!0,$doc.on('click.clockpicker.'+this.id+' focusin.clockpicker.'+this.id,function(e){var target=$(e.target);0===target.closest(self.popover).length&&0===target.closest(self.addon).length&&0===target.closest(self.input).length&&self.hide();}),$doc.on('keyup.clockpicker.'+this.id,function(e){27===e.keyCode&&self.hide();}),this.raiseCallback(this.options.afterShow,'afterShow');}},ClockPicker.prototype.hide=function(){this.raiseCallback(this.options.beforeHide,'beforeHide'),this.isShown=!1,$doc.off('click.clockpicker.'+this.id+' focusin.clockpicker.'+this.id),$doc.off('keyup.clockpicker.'+this.id),this.popover.hide(),this.raiseCallback(this.options.afterHide,'afterHide');},ClockPicker.prototype.toggleView=function(view,delay){var raiseAfterHourSelect=!1;'minutes'===view&&'visible'===$(this.hoursView).css('visibility')&&(this.raiseCallback(this.options.beforeHourSelect,'beforeHourSelect'),raiseAfterHourSelect=!0);var isHours='hours'===view,nextView=isHours?this.hoursView:this.minutesView,hideView=isHours?this.minutesView:this.hoursView;this.currentView=view,this.spanHours.toggleClass('text-white-50',!isHours),this.spanMinutes.toggleClass('text-white-50',isHours),hideView.addClass('clockpicker-dial-out'),nextView.css('visibility','visible').removeClass('clockpicker-dial-out'),this.resetClock(delay),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){hideView.css('visibility','hidden');},duration),raiseAfterHourSelect&&this.raiseCallback(this.options.afterHourSelect,'afterHourSelect');},ClockPicker.prototype.resetClock=function(delay){var view=this.currentView,value=this[view],isHours='hours'===view,unit=_MathPI/(isHours?6:30),radian=value*unit,radius=isHours&&0<value&&13>value?54:80,x=_Mathsin(radian)*radius,y=-_Mathcos(radian)*radius,self=this;svgSupported&&delay?(self.canvas.addClass('clockpicker-canvas-out'),setTimeout(function(){self.canvas.removeClass('clockpicker-canvas-out'),self.setHand(x,y);},delay)):this.setHand(x,y);},ClockPicker.prototype.setHand=function(x,y,dragging){var unit,value,radian=Math.atan2(x,-y),isHours='hours'===this.currentView,z=_Mathsqrt(x*x+y*y),options=this.options,inner=isHours&&67>z,radius=inner?54:80;if(unit=isHours?options.hourstep/6*_MathPI:options.minutestep/30*_MathPI,options.twelvehour&&(radius=80),0>radian&&(radian=2*_MathPI+radian),value=_Mathround(radian/unit),radian=value*unit,!isHours)value*=options.minutestep,60===value&&(value=0);else if(value*=options.hourstep,options.twelvehour||!inner!=0<value||(value+=12),options.twelvehour&&0===value&&(value=12),24===value&&(value=0),dragging&&!options.twelvehour&&options.disabledhours&&-1!=$.inArray(value,options.disabledhours))return;if(this[this.currentView]!==value&&vibrate&&this.options.vibrate&&!this.vibrateTimer&&(navigator[vibrate](10),this.vibrateTimer=setTimeout($.proxy(function(){this.vibrateTimer=null;},this),100)),this[this.currentView]=value,this[isHours?'spanHours':'spanMinutes'].html(leadingZero(value)),!svgSupported)return void this[isHours?'hoursView':'minutesView'].find('.clockpicker-tick').each(function(){var tick=$(this);tick.toggleClass('active',value===+tick.html());});dragging||!isHours&&value%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute('class','clockpicker-canvas-bg clockpicker-canvas-bg-trans')):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute('class','clockpicker-canvas-bg'));var cx=_Mathsin(radian)*radius,cy=-_Mathcos(radian)*radius;this.hand.setAttribute('x2',cx),this.hand.setAttribute('y2',cy),this.bg.setAttribute('cx',cx),this.bg.setAttribute('cy',cy),this.fg.setAttribute('cx',cx),this.fg.setAttribute('cy',cy);},ClockPicker.prototype.getTime=function(callback){var hours=this.hours;this.options.twelvehour&&12>hours&&'PM'===this.amOrPm&&(hours+=12);var selectedTime=new Date;return selectedTime.setMinutes(this.minutes),selectedTime.setHours(hours),selectedTime.setSeconds(0),callback&&callback.apply(this.element,selectedTime)||selectedTime},ClockPicker.prototype.done=function(){this.raiseCallback(this.options.beforeDone,'beforeDone'),this.hide();var last=this.input.prop('value'),outHours=this.hours,value=':'+leadingZero(this.minutes);this.isHTML5&&this.options.twelvehour&&(12>this.hours&&'PM'===this.amOrPm&&(outHours+=12),12===this.hours&&'AM'===this.amOrPm&&(outHours=0)),value=leadingZero(outHours)+value,!this.isHTML5&&this.options.twelvehour&&(value+=this.amOrPm),this.input.prop('value',value),value!==last&&(this.input.trigger('change'),!this.isInput&&this.element.trigger('change')),this.options.autoclose&&this.input.trigger('blur'),this.raiseCallback(this.options.afterDone,'afterDone');},ClockPicker.prototype.remove=function(){this.element.removeData('clockpicker'),this.input.off('focus.clockpicker click.clockpicker'),this.addon.off('click.clockpicker'),this.isShown&&this.hide(),this.isAppended&&($win.off('resize.clockpicker'+this.id),this.popover.remove());},$.fn.clockpicker=function(option){function handleClockPickerRequest(){var $this=$(this),data=$this.data('clockpicker');if(!data){var options=$.extend({},ClockPicker.DEFAULTS,$this.data(),'object'==('undefined'==typeof option?'undefined':_typeof(option))&&option);$this.data('clockpicker',new ClockPicker($this,options));}else if('function'==typeof data[option])return data[option].apply(data,args)}var args=Array.prototype.slice.call(arguments,1);if(1==this.length){var returnValue=handleClockPickerRequest.apply(this[0]);return returnValue===void 0?this:returnValue}return this.each(handleClockPickerRequest)};})(jQuery);
//# sourceMappingURL=bootstrap4-clockpicker.min.js.map
